<!DOCTYPE html>
<html>

  <head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="style.css"> -->
    <title>Centroid</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false&libraries=places"></script>
    <script type="text/javascript" src="https://rawgit.com/Logicify/jquery-locationpicker-plugin/master/dist/locationpicker.jquery.js"></script>
    <script src="script.js"></script>
  </head>

  <body>
    <div class="container-fluid bg-dark text-light py-3">
        <header class="text-center">
            <h1 class="display-6">Ground Personnel Tracking</h1>
        </header>
    </div> <br />
    <div>
        <h4 class="headerOfCentroid" style="text-align: center;">Select your desired location to be safe guarded</h4>
        <br />
    </div>
    <form id="form" method="post" style="margin-left: 15%; margin-right: 15%;">
    <!-- Location: <input type="text" id="location" style="width: 200px"/> -->
    Latitude: <input type="text" id="lat" style="width: 200px" placeholder="lat"/>
    Longitude: <input type="text" id="lng" style="width: 200px" placeholder="lng"/>
    Radius(in metres): <input type="number" id="rad" style="width: 200px; margin: auto;" placeholder="rad"><br />
    <a href="./servicement.html">
        <input type="submit" value="Submit" />     
    </a>
    

    </form><br />
    
    <div id="us2" style="width: 70%; height:500px; margin: auto;"></div> 
  </body>
  <script>
    var form = document.getElementById('form')
    form.addEventListener('submit',function(e){
        e.preventDefault()
        var lat = parseFloat(document.getElementById('lat').value)
        var lng = parseFloat(document.getElementById('lng').value)
        var rad = parseFloat(document.getElementById('rad').value)
        // let headers = new Headers();
        // headers.append('Content-Type', 'application/json');
        // headers.append('Accept', 'application/json');

        // headers.append('Access-Control-Allow-Origin', 'http://3.89.183.17:8090/api/');
        // // headers.append('Access-Control-Allow-Credentials', 'true');

        // headers.append('GET', 'POST', 'OPTIONS');

        // console.log()
        // const baseUrl = "http://3.89.183.17:8090/api/";
        // axios.defaults.baseURL = 'https://api.example.com';
        fetch("http://3.89.24.93:8090/api/passCoordinates",{
            method:'POST',
            // mode:"no-cors",
            body:JSON.stringify({
                latitude: lat,
                longitude: lng,
                radius: rad
            }),
            // headers:headers
            headers:{
                'Access-Control-Allow-Origin': '*',
                'Access-Control-Allow-Methods' : 'GET, POST, PUT, DELETE, OPTIONS',
                'Access-Control-Allow-Headers': 'Content-Type',
                'Content-Type':'application/json; charset=UTF-8',
            }
        })
        .then(function(response){
            return response.json()
        })
        .then(function(data){
            console.log(data)
        })
    })
  </script>

</html>